

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>LD &mdash; blog.clanzx.net 0.1 文档</title>
  

  
  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../_static/blog.css" type="text/css" />
  

  
        <link rel="index" title="索引"
              href="../genindex.html"/>
        <link rel="search" title="搜索" href="../search.html"/>
    <link rel="top" title="blog.clanzx.net 0.1 文档" href="../index.html"/>
        <link rel="up" title="调试" href="debug.html"/>
        <link rel="next" title="实现 ELF 可执行文件和调试符号表分离" href="splitdebug.html"/>
        <link rel="prev" title="调试" href="debug.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> blog.clanzx.net
          

          
          </a>

          
            
            
              <div class="version">
                0.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">硬件猎奇</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../hardware/intro.html">综述</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hardware/ipmi.html">IPMI</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hardware/memory.html">内存</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hardware/smart.html">通过 SMART 查看和跟踪硬盘健康状态</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hardware/raid.html">RAID 维护备忘</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hardware/interface.html">各种接口简述</a></li>
</ul>
<p class="caption"><span class="caption-text">软件探秘</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../software/init.html">初始化</a></li>
<li class="toctree-l1"><a class="reference internal" href="../software/svc.html">服务维护/管理</a></li>
<li class="toctree-l1"><a class="reference internal" href="../software/ops.html">日常维护</a></li>
<li class="toctree-l1"><a class="reference internal" href="../software/virtualization.html">虚拟化</a></li>
<li class="toctree-l1"><a class="reference internal" href="../software/shell.html">Shell 及常用命令</a></li>
<li class="toctree-l1"><a class="reference internal" href="../software/ssl.html">SSL</a></li>
<li class="toctree-l1"><a class="reference internal" href="../software/nss.html">名字服务</a></li>
<li class="toctree-l1"><a class="reference internal" href="../software/db.html">数据库</a></li>
<li class="toctree-l1"><a class="reference internal" href="../software/web.html">WEB 服务</a></li>
<li class="toctree-l1"><a class="reference internal" href="../software/analysis.html">数据分析</a></li>
</ul>
<p class="caption"><span class="caption-text">网络漫游</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../network/ip-neigh.html">链路层地址（ARP/Neighbor）相关信息</a></li>
<li class="toctree-l1"><a class="reference internal" href="../network/arp.html">ARP</a></li>
<li class="toctree-l1"><a class="reference internal" href="../network/address.html">IP 地址</a></li>
<li class="toctree-l1"><a class="reference internal" href="../network/ipv6-dad.html">Linux IPv6 DAD 相关配置</a></li>
<li class="toctree-l1"><a class="reference internal" href="../network/ip-config.html">Linux 下的多 IP 地址配置方法</a></li>
<li class="toctree-l1"><a class="reference internal" href="../network/rp_filter.html">Linux rp_filter 配置</a></li>
<li class="toctree-l1"><a class="reference internal" href="../network/route.html">路由</a></li>
<li class="toctree-l1"><a class="reference internal" href="../network/openvpn.html">使用 openvpn 实现 SSL VPN</a></li>
<li class="toctree-l1"><a class="reference internal" href="../network/netfilter-recent.html">iptables recent 模块配置</a></li>
</ul>
<p class="caption"><span class="caption-text">开发构建</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="scms.html">配置管理</a></li>
<li class="toctree-l1"><a class="reference internal" href="lang.html">语言</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="debug.html">调试</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">LD</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id1">命令行选项</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id2">环境变量</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="splitdebug.html">实现 ELF 可执行文件和调试符号表分离</a></li>
<li class="toctree-l2"><a class="reference internal" href="segfault.html">由段错误信息定位错误代码</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="kernel.html">内核</a></li>
<li class="toctree-l1"><a class="reference internal" href="api.html">API</a></li>
<li class="toctree-l1"><a class="reference internal" href="nlp.html">自然语言处理</a></li>
</ul>
<p class="caption"><span class="caption-text">天南海北</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../misc/cards.html">各种卡片</a></li>
<li class="toctree-l1"><a class="reference internal" href="../misc/rubiks_cube.html">魔方解法</a></li>
<li class="toctree-l1"><a class="reference internal" href="../misc/restructuredtext.html">reStructuredText 备忘</a></li>
<li class="toctree-l1"><a class="reference internal" href="../misc/debit.html">房贷还款计算的 python 程序</a></li>
<li class="toctree-l1"><a class="reference internal" href="../misc/nexus5.html">Nexus 5</a></li>
<li class="toctree-l1"><a class="reference internal" href="../misc/sites.html">WEB 网站</a></li>
<li class="toctree-l1"><a class="reference internal" href="../misc/illusion.html">错觉</a></li>
</ul>
<p class="caption"><span class="caption-text">读书笔记</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../books/evolution.html">进化 - 从孤胆极客到高效团队</a></li>
</ul>
<p class="caption"><span class="caption-text">索引/表</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../glossary.html">术语表</a></li>
<li class="toctree-l1"><a class="reference internal" href="../genindex.html">索引</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">blog.clanzx.net</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="debug.html">调试</a> &raquo;</li>
        
      <li>LD</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/development/linker.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="ld">
<h1>LD<a class="headerlink" href="#ld" title="永久链接至标题">¶</a></h1>
<div class="section" id="id1">
<h2>命令行选项<a class="headerlink" href="#id1" title="永久链接至标题">¶</a></h2>
<div class="versionadded">
<p><span class="versionmodified">&#64;2019-02-20 新版功能: </span>创建</p>
</div>
<p>gcc 使用 <cite>-Wl,</cite> 前缀，例如 <cite>-Wl,--as-needed</cite>。</p>
<ul>
<li><p class="first">--as-needed</p>
<p>允许链接器忽略不需要的库。其他两个参数：</p>
<ul class="simple">
<li>--no-undefined</li>
<li>--no-allow-shlib-undefined</li>
</ul>
<p>参考 <a class="reference external" href="https://wiki.debian.org/ToolChain/DSOLinking#Unresolved_symbols_in_shared_libraries">Unresolved symbols in shared libraries</a>
和 <a class="reference external" href="https://wiki.gentoo.org/wiki/Project:Quality_Assurance/As-needed">Project:Quality Assurance/As-needed</a>。</p>
</li>
</ul>
</div>
<div class="section" id="id2">
<h2>环境变量<a class="headerlink" href="#id2" title="永久链接至标题">¶</a></h2>
<ul>
<li><p class="first">LD_DEBUG</p>
<div class="versionadded">
<p><span class="versionmodified">&#64;2011-03-09 新版功能: </span>创建</p>
</div>
<p>If LD_DEBUG is set, the linker will dump many useful debug information.
See help below:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ LD_DEBUG=help id
Valid options for the LD_DEBUG environment variable are:

  libs        display library search paths
  reloc       display relocation processing
  files       display progress for input file
  symbols     display symbol table processing
  bindings    display information about symbol binding
  versions    display version dependencies
  scopes      display scope information
  all         all previous options combined
  statistics  display relocation statistics
  unused      determined unused DSOs
  help        display this help message and exit

To direct the debugging output into a file instead of standard output
a filename can be specified using the LD_DEBUG_OUTPUT environment variable.
</pre></div>
</div>
<p>See following example for a common error
<cite>cannot open shared object file: No such file or directory</cite>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ vim
vim: error while loading shared libraries: libgcc_s.so.1: cannot open shared object file: No such file or directory
$ LD_DEBUG=libs vim
     23579:     find library=libSM.so.6 [0]; searching
     ...
     23579:     find library=libgcc_s.so.1 [0]; searching
     23579:      search cache=/etc/ld.so.cache
     23579:       trying file=/usr/lib/gcc/x86_64-pc-linux-gnu/7.3.0/libgcc_s.so.1
     23579:      search path=/lib64/tls/x86_64/x86_64:/lib64/tls/x86_64:/lib64/tls/x86_64:/lib64/tls:/lib64/x86_64/x86_64:/lib64/x86_64:/lib64/x86_64:/lib64:/usr/lib64/tls/x86_64/x86_64:/usr/lib64/tls/x86_64:/usr/lib64/tls/x86_64:/usr/lib64/tls:/usr/lib64/x86_64/x86_64:/usr/lib64/x86_64:/usr/lib64/x86_64:/usr/lib64            (system search path)
     23579:       trying file=/lib64/tls/x86_64/x86_64/libgcc_s.so.1
     23579:       trying file=/lib64/tls/x86_64/libgcc_s.so.1
     23579:       trying file=/lib64/tls/x86_64/libgcc_s.so.1
     23579:       trying file=/lib64/tls/libgcc_s.so.1
     23579:       trying file=/lib64/x86_64/x86_64/libgcc_s.so.1
     23579:       trying file=/lib64/x86_64/libgcc_s.so.1
     23579:       trying file=/lib64/x86_64/libgcc_s.so.1
     23579:       trying file=/lib64/libgcc_s.so.1
     23579:       trying file=/usr/lib64/tls/x86_64/x86_64/libgcc_s.so.1
     23579:       trying file=/usr/lib64/tls/x86_64/libgcc_s.so.1
     23579:       trying file=/usr/lib64/tls/x86_64/libgcc_s.so.1
     23579:       trying file=/usr/lib64/tls/libgcc_s.so.1
     23579:       trying file=/usr/lib64/x86_64/x86_64/libgcc_s.so.1
     23579:       trying file=/usr/lib64/x86_64/libgcc_s.so.1
     23579:       trying file=/usr/lib64/x86_64/libgcc_s.so.1
     23579:       trying file=/usr/lib64/libgcc_s.so.1
     23579:
vim: error while loading shared libraries: libgcc_s.so.1: cannot open shared object file: No such file or directory
</pre></div>
</div>
</li>
</ul>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="splitdebug.html" class="btn btn-neutral float-right" title="实现 ELF 可执行文件和调试符号表分离" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="debug.html" class="btn btn-neutral" title="调试" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, @clan https://github.com/clan/clan.github.io/.
      最后更新于 2019-03-23 11:43.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'0.1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="../_static/js/ga.js"></script>
      <script type="text/javascript" src="../_static/js/baidu.js"></script>
      <script type="text/javascript" src="../_static/translations.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>